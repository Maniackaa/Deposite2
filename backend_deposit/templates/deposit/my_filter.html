{% extends 'base.html' %}
{% block title %}Настройка фильтра по банкам{% endblock %}


{% block content %}
<div class="container col-md-12 ">
    <h3>Настройка фильтра по банкам</h3>
    <p class="text-muted">Выберите получателей для фильтрации платежей. Карты группируются по банкам на основе BIN-кодов.</p>

    <form method="post">
       {% csrf_token %}
       <div class="row justify-content-start">
       {% for field in form %}
          {% if field.name|slice:":5" == "bank_" %}
          <div class="col-md-3 col-lg-2 mb-4">
              <div class="card h-100">
                  <div class="card-header">
                      <h6 class="card-title mb-0">{{ field.label }}</h6>
                  </div>
                  <div class="card-body">
                      {% for error in field.errors %}
                          <div class="alert alert-danger">
                            {{ error|escape }}
                          </div>
                      {% endfor %}
                      {{ field }}
                  </div>
              </div>
          </div>
          {% endif %}
        {% endfor %}
        </div>
        
        <div class="mt-4">
            <button type="submit" class="btn btn-primary">
                 Сохранить фильтр
            </button>
            <button type="button" class="btn btn-secondary" onclick="resetAllCheckboxes()">
                 Сбросить все
            </button>
            <a href="{% url 'deposit:incomings_filter' %}" class="btn btn-outline-secondary">
                 Вернуться к фильтру
            </a>
        </div>
    </form>
</div>



{% endblock %}

{% block javascript %}
<script>
function resetAllCheckboxes() {
    // Находим все чекбоксы в форме и снимаем с них галочки
    console.log('Сброс чекбоксов...');
    const checkboxes = document.querySelectorAll('input[type="checkbox"]');
    console.log('Найдено чекбоксов:', checkboxes.length);
    checkboxes.forEach(checkbox => {
        checkbox.checked = false;
        console.log('Сброшен чекбокс:', checkbox.name);
    });
    alert('Все чекбоксы сброшены!');
}
</script>
{% endblock %}